{% extends 'mainapp/base.html' %}

{% block title %}
    <title>{{ category }}</title>
{% endblock title %}

{% block sidebar %}
    <ul class="list-parent-categories">
    {% for p_category in p_categories %}
        <li><input type="checkbox" id="hd-1" class="hide"/>
         <label for="hd-1" >{{ p_category }}</label>
        <div>
            <ul class="list-categories">
            {% for category in p_category.get_categories_by_parent %}
                <li><a href="{{ category.get_absolute_url  }}"><span id="name">{{ category }}</span> ({{ category.get_num_task_by_cat }})</a></li>
            {%endfor%}
            </ul>
        </div>
    {%endfor%}
    </ul>
{% endblock sidebar %}

{% if is_start_page %}
    {% block category-content %}
        <p class="category-title">Задачи по выбранной категории {{ category }}</p>

        <ol class="list-tasks">
            {% for task in tasks %}
                <li class="task">
                    <div class="task-name">
                        <span id="num">Задача 1.</span>
                        <span id="info">{{ task.get_name }}</span>
                    </div>

                {% if task.image %}
                    <div><img src="{{ task.image.url }}" class="task-img">{{ task }}</div>
                {% else %}
                    <div class="task-text-if-not-img">{{ task }}</div>
                {% endif %}

                    <ul class="task-action">
                        <li><a href={% url 'task' category_slug=task.category.slug task_id=task.id %}>Ответ</a></li>
                        <li><a href={% url 'task' category_slug=task.category.slug task_id=task.id %}>Решение</a></li>
                        <li><a href="{{ task.get_absolute_url }}">Обсуждение</a></li>
                    </ul>
                </li>
                <hr>
            {%endfor%}
        </ol>
        {% include "mainapp/pagination.html" with page=tasks %}
    {% endblock category-content %}
{% endif %}